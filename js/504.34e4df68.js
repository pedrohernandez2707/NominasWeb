(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[504],{6504:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>j});var t=l(9835),n=l(6970),o=l(5822),s=l.n(o);const i=(0,t._)("img",{src:s()},null,-1),u=(0,t._)("div",{class:"text-center q-pt-lg"},[(0,t._)("div",{class:"col text-h6 ellipsis"}," Log in ")],-1);function r(e,a,l,o,s,r){const d=(0,t.up)("q-avatar"),p=(0,t.up)("q-card-section"),m=(0,t.up)("q-select"),c=(0,t.up)("q-icon"),f=(0,t.up)("q-input"),g=(0,t.up)("q-spinner-gears"),w=(0,t.up)("q-btn"),v=(0,t.up)("q-form"),b=(0,t.up)("q-card"),h=(0,t.up)("q-page"),_=(0,t.up)("q-page-container"),y=(0,t.up)("q-layout");return(0,t.wg)(),(0,t.j4)(y,null,{default:(0,t.w5)((()=>[(0,t.Wm)(_,null,{default:(0,t.w5)((()=>[(0,t.Wm)(h,{class:"flex bg-image flex-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{style:(0,n.j5)(e.$q.screen.lt.sm?{width:"80%"}:{width:"30%"})},{default:(0,t.w5)((()=>[(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[(0,t.Wm)(d,{size:"103px",class:"absolute-center"},{default:(0,t.w5)((()=>[i])),_:1})])),_:1}),(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[u])),_:1}),(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[(0,t.Wm)(v,{class:"q-gutter-md",onSubmit:e.onSubmit},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{label:"Seleccione la Empresa",filled:"",modelValue:e.modelEmpresa,"onUpdate:modelValue":a[0]||(a[0]=a=>e.modelEmpresa=a),options:e.optionsEmpresa,rules:[e=>!!e||"Campo obligatorio"]},null,8,["modelValue","options","rules"]),(0,t.Wm)(f,{rounded:"",filled:"",type:"email",modelValue:e.username,"onUpdate:modelValue":a[1]||(a[1]=a=>e.username=a),label:"Usuario","lazy-rules":"",rules:[e=>!!e||"Campo obligatorio",e=>/.+@.+\..+/.test(e)||"Ingresa un Correo Valido"]},{append:(0,t.w5)((()=>[(0,t.Wm)(c,{name:"person"})])),_:1},8,["modelValue","rules"]),(0,t.Wm)(f,{rounded:"",type:e.isPwd?"password":"text",filled:"",modelValue:e.password,"onUpdate:modelValue":a[3]||(a[3]=a=>e.password=a),label:"ContraseÃ±a","lazy-rules":"",rules:[e=>!!e||"Campo obligatorio"]},{append:(0,t.w5)((()=>[(0,t.Wm)(c,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[2]||(a[2]=a=>e.isPwd=!e.isPwd)},null,8,["name"])])),_:1},8,["type","modelValue","rules"]),(0,t._)("div",null,[(0,t.Wm)(w,{loading:e.loading,color:"indigo",type:"submit",size:"md"},{loading:(0,t.w5)((()=>[(0,t.Wm)(g,{class:"on-left"})])),default:(0,t.w5)((()=>[(0,t.Uk)(" Ingresar ")])),_:1},8,["loading"])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["style"])])),_:1})])),_:1})])),_:1})}var d=l(4136),p=l(8651),m=l(499),c=l(8339),f=l(2718),g=function(e,a,l,t){function n(e){return e instanceof l?e:new l((function(a){a(e)}))}return new(l||(l=Promise))((function(l,o){function s(e){try{u(t.next(e))}catch(a){o(a)}}function i(e){try{u(t["throw"](e))}catch(a){o(a)}}function u(e){e.done?l(e.value):n(e.value).then(s,i)}u((t=t.apply(e,a||[])).next())}))};const w=(0,t.aZ)({setup(){const e=(0,m.iH)([]),a=(0,m.iH)(null),l=(0,m.iH)(""),t=(0,m.iH)(""),n=(0,m.iH)(!1),o=(0,c.tv)(),s=(0,m.iH)(!0),i=()=>g(this,void 0,void 0,(function*(){yield d.api.get(d.endPoints.EMPRESAS).then((a=>{e.value=a.data})).catch((e=>{(0,p.L1)(e)}))})),u=()=>{r()},r=()=>g(this,void 0,void 0,(function*(){n.value=!0,yield d.api.post(d.endPoints.LOGIN,{idEmpresa:a.value.value,email:l.value,pass:t.value},{}).then((e=>{const a=e.data.data.token,t=e.data.data.nombre,s=e.data.data.rol;a?((0,f.Fr)(a,t,s,l.value),n.value=!1,o.push("/home")):(0,p.wp)("Alerta","No se pudo iniciar sesion, contante al administrador",{})})).catch((e=>{(0,p.L1)(e,{mensaje:e.response.data.mensaje})})).finally((()=>{n.value=!1}))}));return{username:l,password:t,getEmpresas:i,optionsEmpresa:e,modelEmpresa:a,onSubmit:u,loading:n,isPwd:s}},created(){this.getEmpresas()}});var v=l(1639),b=l(7605),h=l(2133),_=l(9885),y=l(4458),q=l(3190),W=l(1357),Z=l(8326),Q=l(6384),C=l(3119),E=l(2857),P=l(4455),S=l(9120),V=l(9984),x=l.n(V);const k=(0,v.Z)(w,[["render",r]]),j=k;x()(w,"components",{QLayout:b.Z,QPageContainer:h.Z,QPage:_.Z,QCard:y.Z,QCardSection:q.Z,QAvatar:W.Z,QForm:Z.Z,QSelect:Q.Z,QInput:C.Z,QIcon:E.Z,QBtn:P.Z,QSpinnerGears:S.Z})},5822:(e,a,l)=>{e.exports=l.p+"img/login.c1e6261f.png"}}]);