"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[685],{8685:(e,l,o)=>{o.r(l),o.d(l,{default:()=>De});var a=o(9835);const n={class:"row"},i={class:"col-xs-2 col-md-2 q-pr-md"},t={class:"col-xs-4 col-md-3 q-pr-md"},d={class:"col-xs-4 col-md-3 q-pr-md"},r={class:"col-xs-3 col-md-3 q-pr-md"},s={class:"col-xs-3 col-md-3 q-pr-md"},u={class:"col-xs-3 col-md-3 q-pr-md"},c={class:"col-xs-3 col-md-3 q-pr-md"},m={class:"col-xs-4 col-sm-2 col-md-2 q-pr-md"},p={class:"col-xs-4 col-sm-2 col-md-2 q-pr-md"},v={class:"col-xs-4 col-sm-2 col-md-2 q-pr-md"},f={class:"col-xs-4 col-sm-2 col-md-2 q-pr-md"},g={class:"q-pa-md q-gutter-sm"},b={style:{height:"500px"}};function h(e,l,o,h,D,w){const _=(0,a.up)("q-input"),E=(0,a.up)("q-toggle"),y=(0,a.up)("q-select"),V=(0,a.up)("q-icon"),q=(0,a.up)("q-btn"),P=(0,a.up)("q-file"),C=(0,a.up)("famModal"),F=(0,a.up)("docModal"),x=(0,a.up)("q-form"),W=(0,a.up)("q-tooltip"),S=(0,a.up)("q-img"),I=(0,a.up)("q-table"),k=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(k,{padding:""},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{onSubmit:e.onSubmit,class:"q-gutter-md",onReset:e.clear},{default:(0,a.w5)((()=>[(0,a._)("div",n,[(0,a._)("div",i,[(0,a.Wm)(_,{modelValue:e.codigo,"onUpdate:modelValue":l[0]||(l[0]=l=>e.codigo=l),type:"number",label:"Código",disable:""},null,8,["modelValue"])]),(0,a._)("div",t,[(0,a.Wm)(_,{clearable:"",modelValue:e.nombre,"onUpdate:modelValue":l[1]||(l[1]=l=>e.nombre=l),type:"text",label:"Nombre",rules:[e=>e.length<=80||"El nombre no puede ser mayor a 80 caracteres"]},null,8,["modelValue","rules"])]),(0,a._)("div",d,[(0,a.Wm)(_,{clearable:"",modelValue:e.apellido,"onUpdate:modelValue":l[2]||(l[2]=l=>e.apellido=l),type:"text",label:"Apellido",rules:[e=>e.length<=80||"El Apellido no puede ser mayor a 80 caracteres"]},null,8,["modelValue","rules"])]),(0,a._)("div",r,[(0,a.Wm)(_,{clearable:"",modelValue:e.telefono,"onUpdate:modelValue":l[3]||(l[3]=l=>e.telefono=l),type:"text",label:"Telefono",rules:[e=>e.length<=40||"El nombre no puede ser mayor a 40 caracteres"]},null,8,["modelValue","rules"])]),(0,a._)("div",s,[(0,a.Wm)(_,{clearable:"",modelValue:e.direccion,"onUpdate:modelValue":l[4]||(l[4]=l=>e.direccion=l),type:"text",label:"Direccion",rules:[e=>e.length<=100||"La direccion no puede ser mayor a 100 caracteres"]},null,8,["modelValue","rules"])]),(0,a._)("div",u,[(0,a.Wm)(_,{clearable:"",modelValue:e.dpi,"onUpdate:modelValue":l[5]||(l[5]=l=>e.dpi=l),type:"text",label:"DPI",rules:[e=>13==e.length||"El DPI debe ser de 13 caracteres"]},null,8,["modelValue","rules"])]),(0,a._)("div",c,[(0,a.Wm)(_,{clearable:"",modelValue:e.igss,"onUpdate:modelValue":l[6]||(l[6]=l=>e.igss=l),type:"text",label:"Afiliacion IGGS",rules:[e=>null!=e||"Debe ingresar un Valor"]},null,8,["modelValue","rules"])]),(0,a._)("div",m,[(0,a.Wm)(E,{modelValue:e.estado,"onUpdate:modelValue":l[7]||(l[7]=l=>e.estado=l),color:"green",label:"Estado","left-label":""},null,8,["modelValue"])]),(0,a._)("div",p,[(0,a.Wm)(_,{modelValue:e.fechaNac,"onUpdate:modelValue":l[8]||(l[8]=l=>e.fechaNac=l),filled:"",type:"date",label:"Fecha Nacimiento",rules:[e=>null!=e||"Debe ingresar un Valor"]},null,8,["modelValue","rules"])]),(0,a._)("div",v,[(0,a.Wm)(_,{modelValue:e.fechaInicio,"onUpdate:modelValue":l[9]||(l[9]=l=>e.fechaInicio=l),filled:"",type:"date",label:"Fecha Contratacion",rules:[e=>null!=e||"Debe ingresar un Valor"]},null,8,["modelValue","rules"])]),(0,a._)("div",f,[(0,a.Wm)(_,{modelValue:e.fechaFin,"onUpdate:modelValue":l[10]||(l[10]=l=>e.fechaFin=l),filled:"",type:"date",label:"Fecha Fin / Baja"},null,8,["modelValue"])]),(0,a.Wm)(y,{class:"col-xs-12 col-sm-2 q-pr-md",modelValue:e.estadoCivil,"onUpdate:modelValue":l[11]||(l[11]=l=>e.estadoCivil=l),options:e.estadosCiviles,label:"Estado Civil",filled:"",rules:[e=>null!=e||"Debe ingresar un Valor"]},null,8,["modelValue","options","rules"]),(0,a.Wm)(_,{class:"q-pr-md",clearable:"",modelValue:e.Sueldo,"onUpdate:modelValue":l[12]||(l[12]=l=>e.Sueldo=l),type:"number",label:"Sueldo",rules:[e=>parseFloat(e)>=0||"Debe Ingresar un valor mayor o igual a cero"]},null,8,["modelValue","rules"]),(0,a.Wm)(y,{class:"col-xs-12 col-sm-2 q-pr-md",modelValue:e.departamento,"onUpdate:modelValue":l[13]||(l[13]=l=>e.departamento=l),options:e.departamentos,label:"Departamento","use-input":"","input-debounce":"0",onNewValue:e.crearDepto,clearable:"",filled:"",rules:[e=>null!=e||"Debe ingresar un Valor"]},null,8,["modelValue","options","onNewValue","rules"]),(0,a.Wm)(y,{class:"col-xs-12 col-sm-2 q-pr-md",modelValue:e.puesto,"onUpdate:modelValue":l[14]||(l[14]=l=>e.puesto=l),options:e.puestos,label:"Puesto",filled:"","use-input":"","input-debounce":"0",onNewValue:e.crearPuesto,clearable:"",rules:[e=>null!=e||"Debe ingresar un Valor"]},null,8,["modelValue","options","onNewValue","rules"]),e.codigo?((0,a.wg)(),(0,a.j4)(P,{key:0,color:"teal",filled:"",modelValue:e.photoModel,"onUpdate:modelValue":l[15]||(l[15]=l=>e.photoModel=l),label:"Subir Fotografia",accept:".jpg, .jpeg, .png, .bmp, .webp"},{prepend:(0,a.w5)((()=>[(0,a.Wm)(V,{name:"cloud_upload"})])),after:(0,a.w5)((()=>[(0,a.Wm)(q,{round:"",dense:"",flat:"",icon:"send",onClick:e.subirImagen},null,8,["onClick"])])),_:1},8,["modelValue"])):(0,a.kq)("",!0),(0,a._)("div",g,[e.codigo?((0,a.wg)(),(0,a.j4)(C,{key:0,Empleado_ID:e.codigo,Empleado_Name:e.nombre},null,8,["Empleado_ID","Empleado_Name"])):(0,a.kq)("",!0),e.codigo?((0,a.wg)(),(0,a.j4)(F,{key:1,Empleado_ID:e.codigo,Empleado_Name:e.nombre},null,8,["Empleado_ID","Empleado_Name"])):(0,a.kq)("",!0)])]),(0,a._)("div",null,[(0,a.Wm)(q,{label:null===e.codigo?"Guardar":"Actualizar",type:"submit",color:"primary"},null,8,["label"]),(0,a.Wm)(q,{label:"Limpiar",type:"reset",color:"primary",flat:"",class:"q-ml-sm"})])])),_:1},8,["onSubmit","onReset"]),(0,a._)("div",null,[e.Photo_Url?((0,a.wg)(),(0,a.j4)(S,{key:0,src:e.Photo_Url,alt:"Fotografia de Empleado",style:{"max-width":"150px",height:"150px"},fit:"fill"},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{class:"absolute all-pointer-events",size:"20px",name:"info",color:"white",style:{top:"8px",left:"8px"},onClick:e.abrirPestaña},{default:(0,a.w5)((()=>[(0,a.Wm)(W,null,{default:(0,a.w5)((()=>[(0,a.Uk)(" Abrir en nueva pestaña ")])),_:1})])),_:1},8,["onClick"])])),_:1},8,["src"])):(0,a.kq)("",!0)]),(0,a._)("div",b,[(0,a.Wm)(I,{class:"full-height",title:"Usuarios",rows:e.empleados,columns:e.columns,filter:e.filter,pagination:{rowsPerPage:0},onRowClick:e.selectUsuario},{"top-right":(0,a.w5)((()=>[(0,a.Wm)(_,{for:"pos-buscar-detalles",borderless:"",dense:"",modelValue:e.filter,"onUpdate:modelValue":l[16]||(l[16]=l=>e.filter=l),placeholder:"Buscar Empleados",clearable:""},{append:(0,a.w5)((()=>[(0,a.Wm)(V,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["rows","columns","filter","onRowClick"])])])),_:1})}var D=o(9302),w=o(4376),_=o(4136),E=o(8651),y=o(499);const V=(0,a._)("div",{class:"row q-ma-sm"}," Mantenimiento de Familiares ",-1),q={class:"row q-pt-lg q-pb-lg"},P={class:"col q-pa-sm col-md-3"},C={class:"col q-pa-sm col-md-3"},F={class:"col q-pa-sm col-md-3"},x={class:"col q-pa-sm col-md-3"},W={class:"row q-pt-sm q-pb-md"},S={class:"col q-pa-md"},I={class:"row"},k={class:"col"};function H(e,l,o,n,i,t){const d=(0,a.up)("q-btn"),r=(0,a.up)("q-input"),s=(0,a.up)("q-select"),u=(0,a.up)("q-table"),c=(0,a.up)("q-td"),m=(0,a.up)("q-card-actions"),p=(0,a.up)("q-card"),v=(0,a.up)("q-dialog"),f=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(d,{label:"Familiares",color:"secondary",size:"md",icon:"family_restroom",onClick:e.getFamiliaresEmpleado},null,8,["onClick"]),e.Empleado_ID?((0,a.wg)(),(0,a.j4)(v,{key:0,modelValue:e.mostrarModal,"onUpdate:modelValue":l[4]||(l[4]=l=>e.mostrarModal=l),persistent:"","full-width":""},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{bordered:""},{default:(0,a.w5)((()=>[V,(0,a._)("div",q,[(0,a._)("div",P,[(0,a.Wm)(r,{outlined:"",modelValue:e.nombreFam,"onUpdate:modelValue":l[0]||(l[0]=l=>e.nombreFam=l),type:"text",label:"Nombre de Familiar"},null,8,["modelValue"])]),(0,a._)("div",C,[(0,a.Wm)(r,{outlined:"",modelValue:e.telefonoFam,"onUpdate:modelValue":l[1]||(l[1]=l=>e.telefonoFam=l),type:"text",label:"Telefono Contacto"},null,8,["modelValue"])]),(0,a._)("div",F,[(0,a.Wm)(s,{class:"col-xs-12 col-sm-2 q-pr-md",modelValue:e.parentesco,"onUpdate:modelValue":l[2]||(l[2]=l=>e.parentesco=l),options:e.parentescos,label:"Parentesco",filled:""},null,8,["modelValue","options"])]),(0,a._)("div",x,[(0,a.Wm)(s,{class:"col-xs-12 col-sm-2 q-pr-md",modelValue:e.genero,"onUpdate:modelValue":l[3]||(l[3]=l=>e.genero=l),options:e.generos,label:"Genero",filled:""},null,8,["modelValue","options"])]),(0,a.Wm)(d,{label:"Guardar",color:"primary",onClick:e.guardarFamiliar},null,8,["onClick"]),(0,a.Wm)(d,{label:"Limpiar",onClick:e.clearForm},null,8,["onClick"])]),(0,a._)("div",W,[(0,a._)("div",S,[(0,a.Wm)(u,{dense:"",title:"Listado de Familiares","no-data-label":"Sin Registros",columns:e.columnsFam,rows:e.famRows,onRowDblclick:e.asignarFamiliar},null,8,["columns","rows","onRowDblclick"])])]),(0,a._)("div",I,[(0,a._)("div",k,[(0,a.Wm)(u,{dense:"",title:`Familiares de ${e.Empleado_Name}`,rows:e.empFamRows,columns:e.empFamCols,pagination:{rowsPerPage:0},"no-data-label":"Sin Registros"},{"body-cell-Eliminar":(0,a.w5)((l=>[(0,a.Wm)(c,{props:l,style:{padding:"0px",width:"5px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{outline:"",size:"md",color:"red",icon:"delete_forever",onClick:o=>e.desasignarFamiliar(l.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["title","rows","columns"]),(0,a.Wm)(m,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(d,{label:"Regresar",color:"negative",onClick:e.clearForm,icon:"logout"},null,8,["onClick"]),[[f]])])),_:1})])])])),_:1})])),_:1},8,["modelValue"])):(0,a.kq)("",!0)],64)}var U=function(e,l,o,a){function n(e){return e instanceof o?e:new o((function(l){l(e)}))}return new(o||(o=Promise))((function(o,i){function t(e){try{r(a.next(e))}catch(l){i(l)}}function d(e){try{r(a["throw"](e))}catch(l){i(l)}}function r(e){e.done?o(e.value):n(e.value).then(t,d)}r((a=a.apply(e,l||[])).next())}))};const Z=(0,a.aZ)({name:"familiaresModal",props:{Empleado_ID:{type:Number,required:!0},Empleado_Name:{type:String,required:!0}},setup(e){const l=(0,y.iH)(!1),o=(0,y.iH)(""),a=(0,y.iH)(""),n=(0,y.iH)(0),i=(0,y.iH)(["Conyugue","Hijo"]),t=(0,y.iH)("Conyugue"),d=(0,y.iH)(["Masculino","Femenino"]),r=(0,y.iH)("Masculino"),s=(0,y.iH)([]),u=(0,y.iH)([]),c=[{name:"Codigo",label:"Código",field:"id",align:"center"},{name:"Nombre",label:"Nombre",field:"nombre",align:"center"},{name:"Tipo",label:"Tipo",field:"tipo",align:"center"},{name:"Telefono",label:"Telefono",field:"telefono",align:"center"},{name:"Eliminar",label:"Eliminar",field:"Eliminar",align:"center"}],m=[{name:"Codigo",label:"Código",field:"id",align:"center"},{name:"Nombre",label:"Nombre",field:"nombre",align:"center"},{name:"Tipo",label:"Tipo",field:"tipo",align:"center"},{name:"Telefono",label:"Telefono",field:"telefono",align:"center"}],p=()=>{o.value="",a.value="",n.value+=1},v=(l,o,a)=>U(this,void 0,void 0,(function*(){if(!o.id||!e.Empleado_ID)return void(0,E.x2)("Debe seleccionar un empleado y un familiar");const l=yield(0,E.pW)("Confirmacion","Desea agregar el Familiar al Empleado?",{});l&&(yield _.api.post(_.endPoints.EMPLEADOS+"/asignar",{idEmpleado:e.Empleado_ID,idFamiliar:o.id}).then((e=>{b(),(0,E.dF)("Guardado Existosamente")})).catch((e=>{console.log(e),(0,E.L1)(e)})))})),f=l=>U(this,void 0,void 0,(function*(){if(!l.id||!e.Empleado_ID)return void(0,E.x2)("Debe seleccionar un empleado y un familiar");const o=yield(0,E.pW)("Confirmacion","Desea eliminar el Familiar al Empleado?",{});o&&(yield _.api.post(_.endPoints.EMPLEADOS+"/desasignar",{idEmpleado:e.Empleado_ID,idFamiliar:l.id}).then((e=>{b(),(0,E.dF)("Eliminado Existosamente")})).catch((e=>{(0,E.L1)(e)})))})),g=()=>U(this,void 0,void 0,(function*(){yield _.api.get(_.endPoints.EMPLEADOS+"/familiar",{}).then((e=>{s.value=e.data})).catch((e=>{(0,E.L1)(e)}))})),b=()=>U(this,void 0,void 0,(function*(){l.value=!0,e.Empleado_ID&&(yield _.api.get(_.endPoints.EMPLEADOS+"/famEmpleado",{params:{idEmpleado:e.Empleado_ID}}).then((e=>{u.value=e.data})).catch((e=>{(0,E.L1)(e)})))})),h=()=>U(this,void 0,void 0,(function*(){if(""==a.value||""==o.value)return void(0,E.x2)("Debe ingresar todos los campos");const e={Tipo:t.value,Genero:r.value,Telefono:a.value,Nombre:o.value};yield _.api.post(_.endPoints.EMPLEADOS+"/familiar",e).then((e=>{(0,E.dF)("Empleado Guardado Correctamente"),s.value.unshift(e.data)})).catch((e=>{(0,E.L1)(e)}))}));return{mostrarModal:l,telefonoFam:a,nombreFam:o,parentescos:i,parentesco:t,generos:d,genero:r,clearForm:p,columnsFam:m,famRows:s,empFamCols:c,empFamRows:u,guardarFamiliar:h,getFamiliaresEmpleado:b,getFamiliar:g,modalKey:n,asignarFamiliar:v,desasignarFamiliar:f}},created(){this.getFamiliar()}});var M=o(1639),L=o(4455),A=o(2074),T=o(4458),Q=o(3119),N=o(6384),j=o(7580),R=o(7220),O=o(1821),Y=o(2146),G=o(9984),z=o.n(G);const B=(0,M.Z)(Z,[["render",H]]),$=B;z()(Z,"components",{QBtn:L.Z,QDialog:A.Z,QCard:T.Z,QInput:Q.Z,QSelect:N.Z,QTable:j.Z,QTd:R.Z,QCardActions:O.Z}),z()(Z,"directives",{ClosePopup:Y.Z});const K=(0,a._)("div",{class:"row q-ma-sm"}," Expediente de Empleados ",-1),J={class:"row q-pt-lg q-pb-lg"},X={class:"col q-pa-sm col-md-3"},ee={class:"col q-pa-sm col-md-3"},le={class:"row"},oe={class:"col"};function ae(e,l,o,n,i,t){const d=(0,a.up)("q-btn"),r=(0,a.up)("q-select"),s=(0,a.up)("q-icon"),u=(0,a.up)("q-file"),c=(0,a.up)("q-td"),m=(0,a.up)("q-table"),p=(0,a.up)("q-card-actions"),v=(0,a.up)("q-card"),f=(0,a.up)("q-dialog"),g=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(d,{label:"Documentos",color:"info",size:"md",icon:"find_in_page",onClick:e.obtenerDocs},null,8,["onClick"]),e.Empleado_ID?((0,a.wg)(),(0,a.j4)(f,{key:0,modelValue:e.mostrarModal,"onUpdate:modelValue":l[2]||(l[2]=l=>e.mostrarModal=l),persistent:"","full-width":""},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{bordered:""},{default:(0,a.w5)((()=>[K,(0,a._)("div",J,[(0,a._)("div",X,[(0,a.Wm)(r,{class:"col-xs-12 col-sm-2 q-pr-md",modelValue:e.tipoDoc,"onUpdate:modelValue":l[0]||(l[0]=l=>e.tipoDoc=l),options:e.tiposDoc,label:"Tipo Documento",filled:""},null,8,["modelValue","options"])]),(0,a._)("div",ee,[(0,a.Wm)(u,{color:"teal",filled:"",modelValue:e.docModel,"onUpdate:modelValue":l[1]||(l[1]=l=>e.docModel=l),label:"Subir Documento (Solo formato PDF)",accept:".pdf",onRejected:e.onRejected},{prepend:(0,a.w5)((()=>[(0,a.Wm)(s,{name:"cloud_upload"})])),after:(0,a.w5)((()=>[(0,a.Wm)(d,{round:"",dense:"",flat:"",icon:"send",onClick:e.subirDoc},null,8,["onClick"])])),_:1},8,["modelValue","onRejected"])])]),(0,a._)("div",le,[(0,a._)("div",oe,[(0,a.Wm)(m,{dense:"",title:`Expediente de ${e.Empleado_Name}`,rows:e.docRows,columns:e.docCols,pagination:{rowsPerPage:0},"no-data-label":"Sin Registros"},{"body-cell-Documento":(0,a.w5)((l=>[(0,a.Wm)(c,{props:l,style:{padding:"0px",width:"5px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{size:"md",outline:"",color:"indigo",icon:"folder_shared",onClick:o=>e.abrirPestaña(l.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["title","rows","columns"]),(0,a.Wm)(p,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(d,{label:"Regresar",color:"negative",icon:"logout"},null,512),[[g]])])),_:1})])])])),_:1})])),_:1},8,["modelValue"])):(0,a.kq)("",!0)],64)}var ne=function(e,l,o,a){function n(e){return e instanceof o?e:new o((function(l){l(e)}))}return new(o||(o=Promise))((function(o,i){function t(e){try{r(a.next(e))}catch(l){i(l)}}function d(e){try{r(a["throw"](e))}catch(l){i(l)}}function r(e){e.done?o(e.value):n(e.value).then(t,d)}r((a=a.apply(e,l||[])).next())}))};const ie=(0,a.aZ)({name:"documentosModal",props:{Empleado_ID:{type:Number,required:!0},Empleado_Name:{type:String,required:!0}},setup(e){const l=(0,D.Z)(),o=(0,y.iH)(!1),a=(0,y.iH)(""),n=(0,y.iH)([]),i=(0,y.iH)(null),t=(0,y.iH)(["Copia DPI","Títulos - diplomas","Antecedentes penales","Antecedentes policiacos"]),d=(0,y.iH)("Copia DPI"),r=[{name:"Codigo",label:"Código",field:"idempleado",align:"center"},{name:"Tipo",label:"Tipo Documento",field:"tipo",align:"center"},{name:"Documento",label:"Documento",field:"Documento",align:"center"}],s=e=>{(0,E.x2)("Error",{subtitulo:`${e.length} file(s) no cumple con las validaciones, Solo PDF`})},u=()=>ne(this,void 0,void 0,(function*(){o.value=!0,e.Empleado_ID&&(yield _.api.get(_.endPoints.EMPLEADOS+"/obtenerDocs",{params:{idEmpleado:e.Empleado_ID}}).then((e=>{n.value=e.data})).catch((e=>{(0,E.L1)(e)})))})),c=e=>{a.value=e.url,window.open(a.value,"_blank")},m=e=>new Promise(((l,o)=>{const a=new FileReader;a.readAsDataURL(e),a.onload=()=>{var e;return l((null===(e=a.result)||void 0===e?void 0:e.toString())||"")},a.onerror=e=>o(e)})),p=()=>ne(this,void 0,void 0,(function*(){if(!e.Empleado_ID)return void(0,E.x2)("Debe Seleccionar un Empleado");if(!i.value)return void(0,E.x2)("Debe seleccionar un Archivo");const o=yield(0,E.pW)("Confirmacion",`Desea Subir el documento de ${d.value} del empleado ${e.Empleado_ID} ?`,{});if(!o)return;l.loading.show();const n=yield m(i.value);yield _.api.post(_.endPoints.EMPLEADOS+"/saveDoc",{base64:n,Id:e.Empleado_ID,Tipo:d.value}).then((e=>{a.value=e.data.url,u(),(0,E.dF)("Guardado Correctamente")})).catch((e=>{(0,E.L1)(e)})).finally((()=>{l.loading.hide()}))}));return{mostrarModal:o,docCols:r,docRows:n,tiposDoc:t,tipoDoc:d,obtenerDocs:u,abrirPestaña:c,url:a,docModel:i,subirDoc:p,onRejected:s}},created(){}});var te=o(9420),de=o(2857);const re=(0,M.Z)(ie,[["render",ae]]),se=re;z()(ie,"components",{QBtn:L.Z,QDialog:A.Z,QCard:T.Z,QSelect:N.Z,QFile:te.Z,QIcon:de.Z,QTable:j.Z,QTd:R.Z,QCardActions:O.Z}),z()(ie,"directives",{ClosePopup:Y.Z});var ue=function(e,l,o,a){function n(e){return e instanceof o?e:new o((function(l){l(e)}))}return new(o||(o=Promise))((function(o,i){function t(e){try{r(a.next(e))}catch(l){i(l)}}function d(e){try{r(a["throw"](e))}catch(l){i(l)}}function r(e){e.done?o(e.value):n(e.value).then(t,d)}r((a=a.apply(e,l||[])).next())}))};const ce=[{name:"Codigo",label:"Código",field:"id",align:"center"},{name:"Nombres",label:"Nombres",field:"nombres",align:"center"},{name:"Apellidos",label:"Apellidos",field:"apellidos",align:"center"},{name:"CUI",label:"CUI",field:"dpi",align:"center"},{name:"Estado",label:"Estado",field:"estado",align:"center"}],me=(0,a.aZ)({name:"UsuariosPage",components:{famModal:$,docModal:se},methods:{},setup(){const e=(0,D.Z)(),l=(0,y.iH)(""),o=(0,y.iH)(null),a=(0,y.iH)(null),n=(0,y.iH)(null),i=(0,y.iH)(null),t=(0,y.iH)(null),d=(0,y.iH)(null),r=(0,y.iH)(null),s=(0,y.iH)(null),u=(0,y.iH)(null),c=(0,y.iH)(null),m=(0,y.iH)(!0),p=(0,y.iH)(""),v=(0,y.iH)(["Soltero","Casado","Viudo","Divorciado","Unido"]),f=(0,y.iH)("Soltero"),g=(0,y.iH)([]),b=(0,y.iH)(null),h=(0,y.iH)([]),V=(0,y.iH)(null),q=(0,y.iH)(null),P=(0,y.iH)(null),C=(0,y.iH)(""),F=(0,y.iH)([]);let x=(0,y.iH)(!1);const W=()=>{window.open(l.value,"_blank")},S=e=>new Promise(((l,o)=>{const a=new FileReader;a.readAsDataURL(e),a.onload=()=>{var e;return l((null===(e=a.result)||void 0===e?void 0:e.toString())||"")},a.onerror=e=>o(e)})),I=()=>ue(this,void 0,void 0,(function*(){if(!o.value)return void(0,E.x2)("Debe Seleccionar un empleado para actualizar la foto");if(!P.value)return void(0,E.x2)("Debe seleccionar un Archivo");const a=yield(0,E.pW)("Confirmacion",`Desea Subir la Fotografia del empleado ${o.value} ?`,{});if(!a)return;e.loading.show({delay:100});const n=yield S(P.value);yield _.api.post(_.endPoints.EMPLEADOS+"/imagen",{base64:n,Id:o.value}).then((e=>{l.value=e.data.url,(0,E.dF)("Guardado Correctamente")})).catch((e=>{(0,E.L1)(e)})).finally((()=>{e.loading.hide()}))})),k=()=>ue(this,void 0,void 0,(function*(){e.loading.show({delay:100}),yield _.api.get(_.endPoints.EMPLEADOS).then((e=>{F.value=e.data})).catch((e=>{(0,E.L1)(e,{mensaje:e.response.data.mensaje})})).finally((()=>{e.loading.hide()}))})),H=()=>{let l={Id:o.value,Nombres:a.value,Apellidos:c.value,Telefono:r.value,Direccion:d.value,Dpi:s.value,Afiliacion_Igss:u.value,Estado_Civil:f.value,Fecha_Nacimiento:n.value,FechaContratacion:i.value,FechaBaja:void 0===t.value?null:t.value,Estado:!0===m.value?"A":"I",Photo_Url:null,Puesto:V.value.value,Departamento:b.value.value,Sueldo:q.value};null===o.value?(e.loading.show(),_.api.post(_.endPoints.EMPLEADOS,l).then((e=>ue(this,void 0,void 0,(function*(){(0,E.dF)("Empleado guardado"),Z(),yield k()})))).catch((e=>{(0,E.L1)(e,{mensaje:e.response.data.mensaje})})).finally((()=>{e.loading.hide()}))):(e.loading.show(),_.api.put(_.endPoints.EMPLEADOS,l).then((e=>ue(this,void 0,void 0,(function*(){(0,E.dF)("Empleado guardado"),Z(),yield k()})))).catch((e=>{(0,E.L1)(e,{mensaje:e.response.data.mensaje})})).finally((()=>{e.loading.hide()})))},U=(e,v,g)=>{o.value=v.id,a.value=v.nombres,c.value=v.apellidos,m.value=v.estado2,p.value=v.contraseña,f.value=v.estadocivil,d.value=v.direccion,r.value=v.telefono,s.value=v.dpi,u.value=v.afiliacionigss,n.value=w.ZP.formatDate(v.fecha_nacimiento,"YYYY-MM-DD"),i.value=w.ZP.formatDate(v.fechacontratacion,"YYYY-MM-DD"),t.value=w.ZP.formatDate(v.fechabaja,"YYYY-MM-DD"),l.value=v.photourl,b.value=v.departamento,V.value=v.puesto,q.value=v.sueldo},Z=()=>{o.value=null,a.value="",c.value="",m.value=!0,f.value="Soltero",d.value="",r.value="",s.value="",u.value="",n.value=null,i.value=null,t.value=null,b.value=null,q.value=null,V.value=null},M=()=>ue(this,void 0,void 0,(function*(){yield _.api.get(_.endPoints.PUESTOS).then((e=>{h.value=e.data})).catch((e=>{(0,E.L1)(e)}))})),L=()=>ue(this,void 0,void 0,(function*(){yield _.api.get(_.endPoints.PUESTOS+"/deptos").then((e=>{g.value=e.data})).catch((e=>{(0,E.L1)(e)}))})),A=e=>ue(this,void 0,void 0,(function*(){e?yield _.api.post(_.endPoints.PUESTOS,{nombre:e}).then((e=>ue(this,void 0,void 0,(function*(){yield M(),(0,E.dF)("Agregado Correctamente")})))).catch((e=>{(0,E.L1)(e)})):(0,E.wp)("Error","Debe Ingresar un Puesto",{})})),T=e=>ue(this,void 0,void 0,(function*(){e?yield _.api.post(_.endPoints.PUESTOS+"/deptos",{nombre:e}).then((e=>ue(this,void 0,void 0,(function*(){yield L(),(0,E.dF)("Agregado Correctamente")})))).catch((e=>{(0,E.L1)(e)})):(0,E.wp)("Error","Debe Ingresar un Departamento",{})}));return{showModal:x,abrirPestaña:W,Photo_Url:l,subirImagen:I,photoModel:P,getEmpleados:k,onSubmit:H,selectUsuario:U,clear:Z,empleados:F,columns:ce,codigo:o,nombre:a,apellido:c,estado:m,pass:p,estadosCiviles:v,estadoCivil:f,filter:C,direccion:d,telefono:r,dpi:s,igss:u,fechaNac:n,fechaInicio:i,fechaFin:t,departamento:b,departamentos:g,Sueldo:q,puesto:V,puestos:h,getPuestos:M,getDeptos:L,crearPuesto:A,crearDepto:T}},created(){this.getEmpleados(),this.getPuestos(),this.getDeptos()}});var pe=o(9885),ve=o(8326),fe=o(3175),ge=o(335),be=o(6858);const he=(0,M.Z)(me,[["render",h]]),De=he;z()(me,"components",{QPage:pe.Z,QForm:ve.Z,QInput:Q.Z,QToggle:fe.Z,QSelect:N.Z,QFile:te.Z,QIcon:de.Z,QBtn:L.Z,QImg:ge.Z,QTooltip:be.Z,QTable:j.Z})}}]);