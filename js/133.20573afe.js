"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[133],{5133:(e,l,o)=>{o.r(l),o.d(l,{default:()=>H});var a=o(9835);const t={class:"row justify-evenly"},d={class:"col-xs-3 col-md-2"},i={class:"col-xs-9 col-md-4"},n={class:"col-xs-9 col-md-3"},c={class:"row justify-evenly"},u={class:"col-xs-9 col-md-5"},s={class:"col-xs-3 col-md-2"},r={class:"col-xs-3 col-md-2"},m={style:{height:"500px"}};function p(e,l,o,p,b,g){const f=(0,a.up)("q-input"),v=(0,a.up)("q-select"),h=(0,a.up)("q-btn"),_=(0,a.up)("q-card"),P=(0,a.up)("q-form"),w=(0,a.up)("q-tooltip"),y=(0,a.up)("q-icon"),C=(0,a.up)("q-table"),V=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(V,{padding:""},{default:(0,a.w5)((()=>[(0,a.Wm)(P,{onSubmit:e.onSubmit,class:"q-gutter-md"},{default:(0,a.w5)((()=>[(0,a._)("div",t,[(0,a._)("div",d,[(0,a.Wm)(f,{modelValue:e.codigo,"onUpdate:modelValue":l[0]||(l[0]=l=>e.codigo=l),type:"number",label:"CÃ³digo",disable:""},null,8,["modelValue"])]),(0,a._)("div",i,[(0,a.Wm)(v,{class:"col-xs-6 col-md-4",modelValue:e.modelEmpleado,"onUpdate:modelValue":l[1]||(l[1]=l=>e.modelEmpleado=l),options:e.optionsEmpleado,label:"Empleado",filled:""},null,8,["modelValue","options"])]),(0,a._)("div",n,[(0,a.Wm)(h,{class:"q-pa-md",label:"Crear Compra",type:"submit",color:"indigo",disable:null!==e.codigo},null,8,["disable"])]),(0,a._)("div",null,[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Uk)(" Total Q100.00 ")])),_:1})])])])),_:1},8,["onSubmit"]),(0,a.Wm)(P,{onSubmit:e.agregarDetalle,class:"q-gutter-md q-pa-lg"},{default:(0,a.w5)((()=>[(0,a._)("div",c,[(0,a._)("div",u,[(0,a.Wm)(v,{class:"col-xs-12 col-sm-2",modelValue:e.modelProducto,"onUpdate:modelValue":[l[2]||(l[2]=l=>e.modelProducto=l),l[3]||(l[3]=l=>{e.setPrecio(l)})],options:e.optionsProducto,label:"Producto",filled:""},null,8,["modelValue","options"])]),(0,a._)("div",s,[(0,a.Wm)(f,{modelValue:e.precio,"onUpdate:modelValue":l[4]||(l[4]=l=>e.precio=l),type:"text",label:"Precio",disable:""},null,8,["modelValue"])]),(0,a._)("div",r,[(0,a.Wm)(f,{modelValue:e.cantidad,"onUpdate:modelValue":l[5]||(l[5]=l=>e.cantidad=l),type:"number",label:"Cantidad"},null,8,["modelValue"])]),(0,a.Wm)(h,{disable:null==e.codigo,label:"agregar",type:"submit",color:"green"},{default:(0,a.w5)((()=>[null==e.codigo?((0,a.wg)(),(0,a.j4)(w,{key:0,class:""},{default:(0,a.w5)((()=>[(0,a.Uk)("Debe crear una compra primero!")])),_:1})):(0,a.kq)("",!0)])),_:1},8,["disable"])])])),_:1},8,["onSubmit"]),(0,a._)("div",m,[(0,a.Wm)(C,{class:"full-height",title:"Detalles",rows:e.detalles,columns:e.columns,filter:e.filter,pagination:{rowsPerPage:0}},{"top-right":(0,a.w5)((()=>[(0,a.Wm)(f,{for:"pos-buscar-detalles",borderless:"",dense:"",modelValue:e.filter,"onUpdate:modelValue":l[6]||(l[6]=l=>e.filter=l),placeholder:"Buscar Detalles",clearable:""},{append:(0,a.w5)((()=>[(0,a.Wm)(y,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["rows","columns","filter"])])])),_:1})}var b=o(9302),g=o(4136),f=o(8651),v=o(499),h=function(e,l,o,a){function t(e){return e instanceof o?e:new o((function(l){l(e)}))}return new(o||(o=Promise))((function(o,d){function i(e){try{c(a.next(e))}catch(l){d(l)}}function n(e){try{c(a["throw"](e))}catch(l){d(l)}}function c(e){e.done?o(e.value):t(e.value).then(i,n)}c((a=a.apply(e,l||[])).next())}))};const _=[{name:"Compra",label:"Compra",field:"codigo_compra",align:"center"},{name:"Id_Empleado",label:"Id_Empleado",field:"id_empleado",align:"center"},{name:"Nombre",label:"Nombre",field:"nombres",align:"center"},{name:"Id_Producto",label:"Id_Producto",field:"id_producto",align:"center"},{name:"Descripcion",label:"Descripcion",field:"descripcion",align:"center"},{name:"Cantidad",label:"Cantidad",field:"cantidad",align:"center"},{name:"Precio",label:"Precio",field:"precio",align:"center"},{name:"Subtotal",label:"Subtotal",field:"subtotal",align:"center"}],P=(0,a.aZ)({name:"UsuariosPage",setup(){const e=(0,b.Z)(),l=(0,v.iH)(null),o=(0,v.iH)(null),a=(0,v.iH)(0),t=(0,v.iH)(""),d=(0,v.iH)([]),i=(0,v.iH)([]),n=(0,v.iH)(null),c=(0,v.iH)([]),u=(0,v.iH)(null),s=e=>{o.value=e.precio},r=()=>h(this,void 0,void 0,(function*(){let t={compraId:l.value,productoId:n.value.value,cantidad:a.value,precioUnitario:o.value};e.loading.show(),yield g.api.post(g.endPoints.COMPRA_DET,t).then((e=>h(this,void 0,void 0,(function*(){(0,f.dF)("Compra Creada",{timeout:3e3}),yield m()})))).catch((e=>{(0,f.L1)(e)})).finally((()=>{e.loading.hide()}))})),m=()=>h(this,void 0,void 0,(function*(){if(!l.value)return;let e={compraId:l.value};yield g.api.post(g.endPoints.COMPRA_DET+"/id",e).then((e=>{d.value=e.data,console.log(e.data)})).catch((e=>{(0,f.L1)(e)}))})),p=()=>{if(!u.value)return void(0,f.dF)("Alerta",{subtitulo:"Debe Seleccionar un Empleado!",tipo:"warning"});let o={idEmpleado:u.value.value};g.api.post(g.endPoints.COMPRA_ENC,o).then((e=>{(0,f.dF)("Compra Creada",{timeout:3e3}),l.value=e.data.codigo_compra})).catch((e=>{(0,f.L1)(e,{mensaje:e.response.data.mensaje})})).finally((()=>{e.loading.hide()}))},P=()=>h(this,void 0,void 0,(function*(){yield g.api.get(g.endPoints.EMPLEADOS+"/combo").then((e=>{c.value=e.data})).catch((e=>{(0,f.L1)(e)}))})),w=()=>h(this,void 0,void 0,(function*(){yield g.api.get(g.endPoints.PRODUCTOS+"/combo").then((e=>{i.value=e.data})).catch((e=>{(0,f.L1)(e)}))}));return{onSubmit:p,detalles:d,columns:_,codigo:l,precio:o,cantidad:a,setPrecio:s,getProductos:w,getEmpleados:P,optionsEmpleado:c,optionsProducto:i,modelProducto:n,modelEmpleado:u,filter:t,agregarDetalle:r}},created(){this.getEmpleados(),this.getProductos()}});var w=o(1639),y=o(9885),C=o(8326),V=o(3119),E=o(6384),q=o(4455),W=o(4458),x=o(6858),D=o(7580),S=o(2857),Z=o(9984),U=o.n(Z);const Q=(0,w.Z)(P,[["render",p]]),H=Q;U()(P,"components",{QPage:y.Z,QForm:C.Z,QInput:V.Z,QSelect:E.Z,QBtn:q.Z,QCard:W.Z,QTooltip:x.Z,QTable:D.Z,QIcon:S.Z})}}]);