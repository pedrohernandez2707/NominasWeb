"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[997],{2997:(e,a,l)=>{l.r(a),l.d(a,{default:()=>j});var t=l(9835),n=l(6970);const o=(0,t._)("div",{class:"text-center q-pt-lg"},[(0,t._)("div",{class:"col text-h6 ellipsis"}," Inicio de Sesión ")],-1),s={class:"row"},i={class:"col"},u={class:"col"};function r(e,a,l,r,d,p){const m=(0,t.up)("q-img"),c=(0,t.up)("q-avatar"),f=(0,t.up)("q-card-section"),w=(0,t.up)("q-select"),g=(0,t.up)("q-icon"),v=(0,t.up)("q-input"),h=(0,t.up)("q-spinner-gears"),b=(0,t.up)("q-btn"),y=(0,t.up)("q-form"),_=(0,t.up)("q-card"),q=(0,t.up)("q-page"),W=(0,t.up)("q-page-container"),x=(0,t.up)("q-layout");return(0,t.wg)(),(0,t.j4)(x,null,{default:(0,t.w5)((()=>[(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[(0,t.Wm)(q,{class:"flex bg-image flex-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{style:(0,n.j5)(e.$q.screen.lt.sm?{width:"80%"}:{width:"30%"})},{default:(0,t.w5)((()=>[(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c,{size:"110px",class:"absolute-center"},{default:(0,t.w5)((()=>[e.Url?((0,t.wg)(),(0,t.j4)(m,{key:0,src:e.Url,alt:"Fotografia de Empleado",style:{"max-width":"150px",height:"150px"},fit:"fill"},null,8,["src"])):(0,t.kq)("",!0)])),_:1})])),_:1}),(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[o])),_:1}),(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[(0,t.Wm)(y,{class:"q-gutter-md",onSubmit:e.onSubmit},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{label:"Seleccione la Empresa",filled:"",modelValue:e.modelEmpresa,"onUpdate:modelValue":[a[0]||(a[0]=a=>e.modelEmpresa=a),a[1]||(a[1]=a=>{e.selectEmpresa(a)})],options:e.optionsEmpresa,rules:[e=>!!e||"Campo obligatorio"]},null,8,["modelValue","options","rules"]),(0,t.Wm)(v,{rounded:"",filled:"",type:"email",modelValue:e.username,"onUpdate:modelValue":a[2]||(a[2]=a=>e.username=a),label:"Usuario","lazy-rules":"",rules:[e=>!!e||"Campo obligatorio",e=>/.+@.+\..+/.test(e)||"Ingresa un Correo Valido"]},{append:(0,t.w5)((()=>[(0,t.Wm)(g,{name:"person"})])),_:1},8,["modelValue","rules"]),(0,t.Wm)(v,{rounded:"",type:e.isPwd?"password":"text",filled:"",modelValue:e.password,"onUpdate:modelValue":a[4]||(a[4]=a=>e.password=a),label:"Contraseña","lazy-rules":"",rules:[e=>!!e||"Campo obligatorio"]},{append:(0,t.w5)((()=>[(0,t.Wm)(g,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[3]||(a[3]=a=>e.isPwd=!e.isPwd)},null,8,["name"])])),_:1},8,["type","modelValue","rules"]),(0,t._)("div",s,[(0,t._)("div",i,[(0,t.Wm)(b,{loading:e.loading,color:"indigo",type:"submit",size:"md"},{loading:(0,t.w5)((()=>[(0,t.Wm)(h,{class:"on-left"})])),default:(0,t.w5)((()=>[(0,t.Uk)(" Ingresar ")])),_:1},8,["loading"])]),(0,t._)("div",u,[(0,t.Wm)(m,{src:"/icons/android-chrome-192x192.png",alt:"UMG",style:{"max-width":"100px",height:"100px"},fit:"fill"})])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["style"])])),_:1})])),_:1})])),_:1})}var d=l(4136),p=l(8651),m=l(499),c=l(8339),f=l(2718),w=function(e,a,l,t){function n(e){return e instanceof l?e:new l((function(a){a(e)}))}return new(l||(l=Promise))((function(l,o){function s(e){try{u(t.next(e))}catch(a){o(a)}}function i(e){try{u(t["throw"](e))}catch(a){o(a)}}function u(e){e.done?l(e.value):n(e.value).then(s,i)}u((t=t.apply(e,a||[])).next())}))};const g=(0,t.aZ)({setup(){const e=(0,m.iH)([]),a=(0,m.iH)(null),l=(0,m.iH)(""),t=(0,m.iH)(""),n=(0,m.iH)(!1),o=(0,c.tv)(),s=(0,m.iH)(!0),i=(0,m.iH)(""),u=()=>w(this,void 0,void 0,(function*(){yield d.api.get(d.endPoints.EMPRESAS).then((a=>{e.value=a.data})).catch((e=>{(0,p.L1)(e)}))})),r=e=>{e&&(i.value=e.url)},g=()=>{v()},v=()=>w(this,void 0,void 0,(function*(){n.value=!0,yield d.api.post(d.endPoints.LOGIN,{idEmpresa:a.value.value,email:l.value,pass:t.value},{}).then((e=>{const a=e.data.data.token,t=e.data.data.nombre,s=e.data.data.rol;a?((0,f.Fr)(a,t,s,l.value,i.value),n.value=!1,o.push("/home")):(0,p.wp)("Alerta","No se pudo iniciar sesion, contante al administrador",{})})).catch((e=>{(0,p.L1)(e,{mensaje:e.response.data.mensaje})})).finally((()=>{n.value=!1}))}));return{username:l,password:t,getEmpresas:u,optionsEmpresa:e,modelEmpresa:a,onSubmit:g,loading:n,isPwd:s,Url:i,selectEmpresa:r}},created(){this.getEmpresas()}});var v=l(1639),h=l(7605),b=l(2133),y=l(9885),_=l(4458),q=l(3190),W=l(1357),x=l(335),Z=l(8326),E=l(6384),Q=l(3119),C=l(2857),P=l(4455),S=l(9120),V=l(9984),k=l.n(V);const U=(0,v.Z)(g,[["render",r]]),j=U;k()(g,"components",{QLayout:h.Z,QPageContainer:b.Z,QPage:y.Z,QCard:_.Z,QCardSection:q.Z,QAvatar:W.Z,QImg:x.Z,QForm:Z.Z,QSelect:E.Z,QInput:Q.Z,QIcon:C.Z,QBtn:P.Z,QSpinnerGears:S.Z})}}]);